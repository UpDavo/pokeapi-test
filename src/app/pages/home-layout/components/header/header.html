<div class="drawer">
  <input id="mobile-drawer" type="checkbox" class="drawer-toggle" #drawer />

  <!-- Contenido principal -->
  <div class="drawer-content">
    <div class="navbar bg-base-100 shadow-sm">
      <!-- ğŸ‘ˆ Logo + menÃº horizontal -->
      <div class="navbar-start gap-4">
        <!-- Hamburguesa solo en mobile -->
        <label for="mobile-drawer" class="btn btn-ghost lg:hidden drawer-button">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 6h16M4 12h16M4 18h16"
            />
          </svg>
        </label>

        <!-- Logo -->
        <a class="btn btn-ghost normal-case text-xl">PokÃ©Trainer</a>

        <!-- MenÃº horizontal desktop -->
        <ul class="menu menu-horizontal gap-2 px-1 hidden lg:flex">
          @for (item of menu; track item) {
          <li>
            @if (item.children?.length) {
            <details>
              <summary>{{ item.label | translate }}</summary>
              <ul class="p-2 bg-base-100">
                @for (c of item.children; track c) {
                <li>
                  <a
                    [routerLink]="c.link"
                    routerLinkActive="bg-gray-200 text-black"
                    [routerLinkActiveOptions]="{ exact: true }"
                  >
                    {{ c.label | translate }}
                  </a>
                </li>
                }
              </ul>
            </details>
            } @else {
            <a
              [routerLink]="item.link"
              routerLinkActive="bg-gray-200 text-black"
              [routerLinkActiveOptions]="{ exact: true }"
            >
              {{ item.label | translate }}
            </a>
            }
          </li>
          }
        </ul>
      </div>

      <!-- ğŸ‘ˆ Idioma + avatar a la derecha -->
      <div class="navbar-end gap-4 hidden lg:flex">
        <!-- Idioma -->
        <div class="dropdown dropdown-end">
          <div tabindex="0" role="button" class="btn btn-ghost">
            {{ 'menu.language' | translate }}
          </div>
          <ul
            tabindex="0"
            class="menu menu-sm dropdown-content bg-base-100 rounded-box z-1 mt-3 w-40 p-2 shadow"
          >
            <li><a (click)="switchLang('es')">EspaÃ±ol ğŸ‡ªğŸ‡¸</a></li>
            <li><a (click)="switchLang('en')">English ğŸ‡ºğŸ‡¸</a></li>
          </ul>
        </div>

        <!-- Avatar -->
        <div class="dropdown dropdown-end">
          <div tabindex="0" role="button" class="btn btn-ghost btn-circle avatar">
            <div class="w-10 rounded-full">
              <img
                alt="User avatar"
                src="https://img.daisyui.com/images/stock/photo-1534528741775-53994a69daeb.webp"
              />
            </div>
          </div>
          <ul
            tabindex="0"
            class="menu menu-sm dropdown-content bg-base-100 rounded-box z-1 mt-3 w-52 p-2 shadow"
          >
            <li>
              <a>{{ 'menu.profile' | translate }}</a>
            </li>
            <li>
              <a>{{ 'menu.settings' | translate }}</a>
            </li>
            <li>
              <a (click)="logout()">{{ 'menu.logout' | translate }}</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- Drawer lateral solo mobile -->
  <div class="drawer-side">
    <label for="mobile-drawer" aria-label="close sidebar" class="drawer-overlay"></label>
    <ul class="menu bg-base-200 text-base-content min-h-full w-80 p-4">
      @for (item of menu; track item) {
      <li>
        @if (item.children?.length) {
        <details>
          <summary>{{ item.label | translate }}</summary>
          <ul class="p-2">
            @for (c of item.children; track c) {
            <li>
              <a
                [routerLink]="c.link"
                routerLinkActive="bg-gray-200 text-black"
                [routerLinkActiveOptions]="{ exact: true }"
                (click)="drawer.checked = false"
              >
                {{ c.label | translate }}
              </a>
            </li>
            }
          </ul>
        </details>
        } @else {
        <a
          [routerLink]="item.link"
          routerLinkActive="bg-gray-200 text-black"
          [routerLinkActiveOptions]="{ exact: true }"
          (click)="drawer.checked = false"
        >
          {{ item.label | translate }}
        </a>
        }
      </li>
      }

      <li><hr /></li>
      <!-- Idioma en mobile -->
      <li><a (click)="switchLang('es'); drawer.checked = false">EspaÃ±ol ğŸ‡ªğŸ‡¸</a></li>
      <li><a (click)="switchLang('en'); drawer.checked = false">English ğŸ‡ºğŸ‡¸</a></li>

      <li><hr /></li>
      <!-- Avatar en mobile -->
      <li>
        <a>{{ 'menu.profile' | translate }}</a>
      </li>
      <li>
        <a>{{ 'menu.settings' | translate }}</a>
      </li>
      <li>
        <a (click)="logout(); drawer.checked = false">{{ 'menu.logout' | translate }}</a>
      </li>
    </ul>
  </div>
</div>
