<!-- Contenedor de filtros -->
<div class="mb-8 max-w-full">
  <!-- Alerta de error -->
  @if (showError) {
  <p-message
    severity="error"
    [text]="errorMessage"
    [closable]="true"
    (onClose)="dismissError()"
    styleClass="mb-4 w-full"
  ></p-message>
  }

  <!-- Fila de filtros -->
  <div class="grid grid-cols-2 md:grid-cols-6 items-center gap-3 w-full">
    <!-- Buscador -->
    <div class="md:col-span-1 col-span-2">
      <input
        type="text"
        pInputText
        [placeholder]="'pokedex.filter.searchPlaceholder' | translate"
        [(ngModel)]="search"
        (input)="onSearchChange()"
        [disabled]="isLoading"
        maxlength="50"
        class="w-full"
      />
    </div>

    <!-- Select Tipo -->
    <div class="md:col-span-1 col-span-2">
      <select
        class="w-full p-2 border rounded-md"
        (change)="onTypeSelectChange($event)"
        [disabled]="isLoading || availableTypes.length === 0"
      >
        <option value="">
          {{
            availableTypes.length === 0
              ? ('pokedex.filter.allTypes' | translate)
              : ('pokedex.filter.type' | translate)
          }}
        </option>
        @for (type of availableTypes; track type) {
        <option [value]="type">{{ 'pokedex.types.' + type | translate }}</option>
        }
      </select>
    </div>

    <!-- Select Región -->
    <div class="md:col-span-1 col-span-2">
      <select
        class="w-full p-2 border rounded-md"
        (change)="onRegionSelectChange($event)"
        [disabled]="isLoading || availableRegions.length === 0"
      >
        <option value="">
          {{
            availableRegions.length === 0
              ? ('pokedex.filter.allRegions' | translate)
              : ('pokedex.filter.region' | translate)
          }}
        </option>
        @for (region of availableRegions; track region) {
        <option [value]="region">{{ 'pokedex.regions.' + region | translate }}</option>
        }
      </select>
    </div>

    <!-- Select Generación -->
    <div class="md:col-span-1 col-span-2">
      <select
        class="w-full p-2 border rounded-md"
        (change)="onGenerationSelectChange($event)"
        [disabled]="isLoading || availableGenerations.length === 0"
      >
        <option value="">
          {{
            availableGenerations.length === 0
              ? ('pokedex.filter.allGenerations' | translate)
              : ('pokedex.filter.generation' | translate)
          }}
        </option>
        @for (generation of availableGenerations; track generation) {
        <option [value]="generation">
          {{ 'pokedex.filter.generation' | translate }} {{ generation }}
        </option>
        }
      </select>
    </div>

    <!-- Botones -->
    <p-button
      [label]="'pokedex.filter.apply' | translate"
      (click)="emitFilterChange()"
      styleClass="w-full"
      size="small"
    ></p-button>
    <p-button
      [label]="'pokedex.filter.clearAll' | translate"
      (click)="onClearFilters()"
      severity="secondary"
      [outlined]="true"
      styleClass="w-full"
      size="small"
    ></p-button>
  </div>

  <!-- Chips de filtros activos -->
  @if (hasActiveFilters) {
  <div class="flex flex-wrap gap-2 mt-4">
    <!-- Chip de búsqueda -->
    @if (search.trim()) {
    <p-chip [label]="searchChipLabel" [removable]="true" (onRemove)="clearSearch()"></p-chip>
    }
    <!-- Chips de tipos -->
    @for (type of selectedTypes; track type) {
    <p-chip
      [label]="'pokedex.types.' + type | translate"
      [removable]="true"
      (onRemove)="removeType(type)"
    ></p-chip>
    }
    <!-- Chips de regiones -->
    @for (region of selectedRegions; track region) {
    <p-chip
      [label]="'pokedex.regions.' + region | translate"
      [removable]="true"
      (onRemove)="removeRegion(region)"
    ></p-chip>
    }
    <!-- Chips de generaciones -->
    @for (generation of selectedGenerations; track generation) {
    <p-chip
      [label]="('pokedex.filter.generation' | translate) + ' ' + generation"
      [removable]="true"
      (onRemove)="removeGeneration(generation)"
    ></p-chip>
    }
  </div>
  }
</div>
